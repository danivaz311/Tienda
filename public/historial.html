<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Historial de Compras</title>
</head>
<body>
  <h1>üõçÔ∏è Historial de Compras</h1>
  <div id="historial"></div>

  <script>
    const token = localStorage.getItem('token');
console.log('Token:', token);
    fetch('/api/ordenes', {
      headers: {
        'Authorization': 'Bearer ' + token
      }
    })
    .then(res => res.json())
    .then(data => {
      const contenedor = document.getElementById('historial');
      if (data.length === 0) {
        contenedor.innerHTML = '<p>No tienes compras registradas.</p>';
        return;
      }

      let html = '';
      data.forEach(item => {
        html += `
          <div style="margin-bottom: 1em;">
            <strong>Orden #${item.id}</strong><br>
            Fecha: ${new Date(item.fecha).toLocaleString()}<br>
            Libro: ${item.titulo}<br>
            Cantidad: ${item.cantidad}<br>
            Precio Unitario: $${item.precio_unitario}<br>
            <hr>
          </div>
        `;
      });
      contenedor.innerHTML = html;
    })
    .catch(err => {
      console.error(err);
      document.getElementById('historial').innerText = 'Error al cargar historial.';
    });
  </script>
</body>
</html>
